public static byte[] MergePdf(List<byte[]> pdfs)
{
    var documents = new List<PdfSharp.Pdf.PdfDocument>();

    foreach (var pdf in pdfs)
    {
        using (var stream = new MemoryStream(pdf))
        {
            try
            {
                var doc = PdfSharp.Pdf.IO.PdfReader.Open(stream, PdfSharp.Pdf.IO.PdfDocumentOpenMode.Import);
                documents.Add(doc);
            }
            catch (PdfSharp.Pdf.IO.PdfReaderException ex)
            {
                // Log and handle unsupported iref PDFs
                throw new NotSupportedException("The PDF format is not supported. Try converting to PDF 1.4.", ex);
            }
        }
    }

    using (var outPdf = new PdfSharp.Pdf.PdfDocument())
    {
        foreach (var doc in documents)
        {
            foreach (var page in doc.Pages)
            {
                outPdf.AddPage(page);
            }
        }

        using (var stream = new MemoryStream())
        {
            outPdf.Save(stream, false);
            return stream.ToArray();
        }
    }
}
